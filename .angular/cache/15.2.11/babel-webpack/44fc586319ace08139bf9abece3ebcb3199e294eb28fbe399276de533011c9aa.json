{"ast":null,"code":"import { BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/customer.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../navbar/navbar.component\";\nconst _c0 = function (a0, a1, a2, a3) {\n  return [a0, a1, a2, a3];\n};\nconst _c1 = function (a1, a2) {\n  return [\"/invoices\", a1, a2];\n};\nfunction InvoicesComponent_ng_container_0_ng_container_1_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 21)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"span\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"button\", 23);\n    i0.ɵɵtext(15, \"Print\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const invoice_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(invoice_r5.invoiceNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(invoice_r5.services);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction4(10, _c0, invoice_r5.status === \"PAID\" ? \" bg-success\" : \"\", invoice_r5.status === \"PENDING\" ? \" bg-primary\" : \"\", invoice_r5.status === \"CANCELED\" ? \" bg-danger\" : \"\", invoice_r5.status === \"OVERDUE\" ? \" bg-warning\" : \"\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", invoice_r5.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 7, invoice_r5.date, \"mediumDate\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", invoice_r5.total, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(15, _c1, invoice_r5.id, invoice_r5.invoiceNumber));\n  }\n}\nfunction InvoicesComponent_ng_container_0_ng_container_1_nav_36_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 29)(1, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function InvoicesComponent_ng_container_0_ng_container_1_nav_36_li_6_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const i_r8 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r9.goToPage(i_r8));\n    });\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r8 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i_r8 == i0.ɵɵpipeBind1(2, 2, ctx_r6.currentPage$) ? \" active\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r8 + 1, \" \");\n  }\n}\nconst _c2 = function () {\n  return [];\n};\nfunction InvoicesComponent_ng_container_0_ng_container_1_nav_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nav\", 24)(1, \"ul\", 25)(2, \"li\", 26);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementStart(4, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function InvoicesComponent_ng_container_0_ng_container_1_nav_36_Template_a_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.goToNextOrPreviousPage(\"backward\"));\n    });\n    i0.ɵɵtext(5, \"\\u00AB Prev\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, InvoicesComponent_ng_container_0_ng_container_1_nav_36_li_6_Template, 4, 4, \"li\", 28);\n    i0.ɵɵelementStart(7, \"li\", 26);\n    i0.ɵɵpipe(8, \"async\");\n    i0.ɵɵelementStart(9, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function InvoicesComponent_ng_container_0_ng_container_1_nav_36_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r13.goToNextOrPreviousPage(\"forward\"));\n    });\n    i0.ɵɵtext(10, \"Next \\u00BB\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const state_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", 0 == i0.ɵɵpipeBind1(3, 3, ctx_r4.currentPage$) ? \" disabled\" : \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(7, _c2).constructor(state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page.totalPages));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", (state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page.totalPages) - 1 == i0.ɵɵpipeBind1(8, 5, ctx_r4.currentPage$) ? \" disabled\" : \"\");\n  }\n}\nconst _c3 = function () {\n  return [\"/\"];\n};\nfunction InvoicesComponent_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-navbar\", 3);\n    i0.ɵɵelementStart(2, \"section\")(3, \"div\", 4)(4, \"nav\", 5)(5, \"ol\", 6)(6, \"li\", 7)(7, \"a\", 8);\n    i0.ɵɵtext(8, \"Home\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"li\", 9);\n    i0.ɵɵtext(10, \" Invoices \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"h4\", 12);\n    i0.ɵɵtext(14, \"Invoices\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"h4\", 13);\n    i0.ɵɵelement(17, \"i\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 15)(19, \"table\", 16)(20, \"thead\")(21, \"tr\")(22, \"th\", 17);\n    i0.ɵɵtext(23, \"Invoice Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\", 17);\n    i0.ɵɵtext(25, \"Service\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\", 17);\n    i0.ɵɵtext(27, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\", 17);\n    i0.ɵɵtext(29, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\", 17);\n    i0.ɵɵtext(31, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\", 17);\n    i0.ɵɵtext(33, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"tbody\", 18);\n    i0.ɵɵtemplate(35, InvoicesComponent_ng_container_0_ng_container_1_tr_35_Template, 16, 18, \"tr\", 19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(36, InvoicesComponent_ng_container_0_ng_container_1_nav_36_Template, 11, 8, \"nav\", 20);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const state_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.user);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c3));\n    i0.ɵɵadvance(28);\n    i0.ɵɵproperty(\"ngForOf\", state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page.content);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page.content.length) > 0);\n  }\n}\nfunction InvoicesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 1);\n    i0.ɵɵtemplate(1, InvoicesComponent_ng_container_0_ng_container_1_Template, 37, 5, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const state_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngSwitch\", state_r1.dataState);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r0.DataState.LOADED);\n  }\n}\nexport class InvoicesComponent {\n  constructor(router, customerService) {\n    this.router = router;\n    this.customerService = customerService;\n    this.dataSubject = new BehaviorSubject(null);\n    this.isLoadingSubject = new BehaviorSubject(false);\n    this.isLoading$ = this.isLoadingSubject.asObservable();\n    this.currentPageSubject = new BehaviorSubject(0);\n    this.currentPage$ = this.currentPageSubject.asObservable();\n    this.showLogsSubject = new BehaviorSubject(false);\n    this.showLogs$ = this.showLogsSubject.asObservable();\n    this.DataState = DataState;\n  }\n  ngOnInit() {\n    this.invoicesState$ = this.customerService.invoices$().pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADING\n    }), catchError(error => {\n      return of({\n        dataState: DataState.ERROR,\n        error\n      });\n    }));\n  }\n  goToPage(pageNumber) {\n    this.invoicesState$ = this.customerService.invoices$(pageNumber).pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      this.currentPageSubject.next(pageNumber);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADED,\n      appData: this.dataSubject.value\n    }), catchError(error => {\n      return of({\n        dataState: DataState.LOADED,\n        error,\n        appData: this.dataSubject.value\n      });\n    }));\n  }\n  goToNextOrPreviousPage(direction) {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1);\n  }\n}\nInvoicesComponent.ɵfac = function InvoicesComponent_Factory(t) {\n  return new (t || InvoicesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CustomerService));\n};\nInvoicesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InvoicesComponent,\n  selectors: [[\"app-invoices\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[3, \"ngSwitch\", 4, \"ngIf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [3, \"user\"], [1, \"container\"], [\"aria-label\", \"breadcrumb\", 2, \"margin-top\", \"8px\"], [1, \"breadcrumb\"], [1, \"breadcrumb-item\"], [3, \"routerLink\"], [1, \"breadcrumb-item\", \"active\"], [1, \"row\", \"mt-3\"], [1, \"col\"], [1, \"fw-bold\", \"text-start\"], [1, \"fw-bold\", \"text-end\"], [1, \"bi\", \"bi-file-earmark-excel\", 2, \"cursor\", \"pointer\", \"color\", \"green\", \"font-size\", \"30px\"], [1, \"col-xm-12\"], [1, \"table\", \"table-hover\"], [\"scope\", \"col\"], [1, \"table-body\"], [\"class\", \"cell-1\", 4, \"ngFor\", \"ngForOf\"], [\"aria-label\", \"Page navigation example\", 4, \"ngIf\"], [1, \"cell-1\"], [1, \"badge\", 3, \"ngClass\"], [\"type\", \"button\", 1, \"btn\", \"btn-info\", \"btn-sm\", 3, \"routerLink\"], [\"aria-label\", \"Page navigation example\"], [1, \"pagination\", \"justify-content-end\"], [1, \"page-item\", \"pointer\", 3, \"ngClass\"], [1, \"page-link\", 3, \"click\"], [\"class\", \"page-item pointer\", 4, \"ngFor\", \"ngForOf\"], [1, \"page-item\", \"pointer\"], [1, \"page-link\", 3, \"ngClass\", \"click\"]],\n  template: function InvoicesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, InvoicesComponent_ng_container_0_Template, 2, 2, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.invoicesState$));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgSwitch, i3.NgSwitchCase, i1.RouterLink, i4.NavbarComponent, i3.AsyncPipe, i3.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["BehaviorSubject","map","startWith","catchError","of","DataState","i0","InvoicesComponent","constructor","router","customerService","isLoadingSubject","asObservable","currentPageSubject","showLogsSubject","ngOnInit","invoicesState$","invoices$","pipe","response","console","log","dataSubject","next","dataState","LOADED","appData","LOADING","error","ERROR","goToPage","pageNumber","value","goToNextOrPreviousPage","direction","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/invoices/invoices.component.ts","/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/invoices/invoices.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport { CustomHttpResponse, Page } from 'src/app/interface/appstates';\nimport { Invoice } from 'src/app/interface/invoice';\nimport { State } from 'src/app/interface/state';\nimport { User } from 'src/app/interface/user';\nimport { CustomerService } from 'src/app/service/customer.service';\n\n@Component({\n  selector: 'app-invoices',\n  templateUrl: './invoices.component.html',\n  styleUrls: ['./invoices.component.css']\n})\nexport class InvoicesComponent  implements OnInit {\n  invoicesState$: Observable<State<CustomHttpResponse<Page<Invoice> & User>>>;\n  private dataSubject = new BehaviorSubject<CustomHttpResponse<Page<Invoice> & User>>(null);\n  private isLoadingSubject = new BehaviorSubject<boolean>(false);\n  isLoading$ = this.isLoadingSubject.asObservable();\n  private currentPageSubject = new BehaviorSubject<number>(0);\n  currentPage$ = this.currentPageSubject.asObservable();\n  private showLogsSubject = new BehaviorSubject<boolean>(false);\n  showLogs$ = this.showLogsSubject.asObservable();\n  readonly DataState = DataState;\n\n  constructor(private router: Router, private customerService: CustomerService) { }\n\n  ngOnInit(): void {\n    this.invoicesState$ = this.customerService.invoices$()\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADING }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.ERROR, error })\n        })\n      )\n  }\n\n  goToPage(pageNumber?: number): void {\n    this.invoicesState$ = this.customerService.invoices$(pageNumber)\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          this.currentPageSubject.next(pageNumber);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADED, appData: this.dataSubject.value }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.LOADED, error, appData: this.dataSubject.value })\n        })\n      )\n  }\n\n  goToNextOrPreviousPage(direction?: string): void {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1);\n  }\n\n}\n","<ng-container *ngIf=\"(invoicesState$ | async) as state\" [ngSwitch]=\"state.dataState\">\n    <ng-container *ngSwitchCase=\"DataState.LOADED\">\n       <app-navbar [user]=\"state?.appData?.data?.user\"></app-navbar>\n       <section>\n          <div class=\"container\">\n            <nav aria-label=\"breadcrumb\" style=\"margin-top: 8px;\">\n                <ol class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"> <a [routerLink]=\"['/']\">Home</a> </li>\n                   <li class=\"breadcrumb-item active\"> Invoices </li>\n                </ol>\n             </nav>\n             <div class=\"row mt-3\">\n                <div class=\"col\">\n                   <h4 class=\"fw-bold text-start\">Invoices</h4>\n                </div>\n                <div class=\"col\">\n                   <h4 class=\"fw-bold text-end\"><i style=\"cursor: pointer;color: green;font-size: 30px;\" class=\"bi bi-file-earmark-excel\"></i></h4>\n                </div>\n                <div class=\"col-xm-12\">\n                   <table class=\"table table-hover\">\n                      <thead>\n                          <tr>\n                           <th scope=\"col\">Invoice Number</th>\n                           <th scope=\"col\">Service</th>\n                           <th scope=\"col\">Status</th>\n                           <th scope=\"col\">Date</th>\n                           <th scope=\"col\">Total</th>\n                           <th scope=\"col\">Action</th>\n                          </tr>\n                      </thead>\n                      <tbody class=\"table-body\">\n                        <tr *ngFor=\"let invoice of state?.appData?.data?.page.content\" class=\"cell-1\">\n                            <td>{{ invoice.invoiceNumber }}</td>\n                            <td>{{ invoice.services }}</td>\n                            <td>\n                               <span class=\"badge\"\n                                 [ngClass]=\"[\n                                 invoice.status === 'PAID' ? ' bg-success' : '',\n                                 invoice.status === 'PENDING' ? ' bg-primary' : '',\n                                 invoice.status === 'CANCELED' ? ' bg-danger' : '',\n                                 invoice.status === 'OVERDUE' ? ' bg-warning' : '',                                 \n                                 ]\">\n                                 {{ invoice.status }}\n                               </span>\n                            </td>\n                            <td>{{ invoice.date | date: 'mediumDate' }}</td>\n                            <td>${{ invoice.total }}</td>\n                            <td>\n                               <button [routerLink]=\"['/invoices', invoice.id, invoice.invoiceNumber]\" type=\"button\" class=\"btn btn-info btn-sm\">Print</button>\n                            </td>\n                         </tr>\n                      </tbody>\n                  </table>\n                  \n                  <nav *ngIf=\"state?.appData?.data?.page.content.length > 0\" aria-label=\"Page navigation example\">\n                     <ul class=\"pagination justify-content-end\">\n                        <li [ngClass]=\"0 == (currentPage$ | async) ? ' disabled' : ''\" class=\"page-item pointer\">\n                           <a (click)=\"goToNextOrPreviousPage('backward')\" class=\"page-link\">&laquo; Prev</a>\n                        </li>\n                        <li *ngFor=\"let pageNumber of [].constructor(state?.appData?.data?.page.totalPages); let i = index;\" class=\"page-item pointer\">\n                           <a (click)=\"goToPage(i)\" [ngClass]=\"i == (currentPage$ | async) ? ' active' : ''\" class=\"page-link\">\n                             {{ i + 1 }}\n                           </a>\n                        </li>\n                        <li [ngClass]=\"(state?.appData?.data?.page.totalPages - 1) == (currentPage$ | async) ? ' disabled' : ''\" class=\"page-item pointer\">\n                           <a (click)=\"goToNextOrPreviousPage('forward')\" class=\"page-link\">Next &raquo;</a>\n                        </li>\n                     </ul>\n                  </nav>\n                </div>\n             </div>\n          </div>\n       </section>\n    </ng-container>\n </ng-container>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
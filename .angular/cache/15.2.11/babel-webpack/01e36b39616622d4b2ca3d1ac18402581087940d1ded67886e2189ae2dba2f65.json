{"ast":null,"code":"import { BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/customer.service\";\nexport class InvoicesComponent {\n  constructor(router, customerService) {\n    this.router = router;\n    this.customerService = customerService;\n    this.dataSubject = new BehaviorSubject(null);\n    this.isLoadingSubject = new BehaviorSubject(false);\n    this.isLoading$ = this.isLoadingSubject.asObservable();\n    this.currentPageSubject = new BehaviorSubject(0);\n    this.currentPage$ = this.currentPageSubject.asObservable();\n    this.showLogsSubject = new BehaviorSubject(false);\n    this.showLogs$ = this.showLogsSubject.asObservable();\n    this.DataState = DataState;\n  }\n  ngOnInit() {\n    this.invoicesState$ = this.customerService.invoices$().pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADING\n    }), catchError(error => {\n      return of({\n        dataState: DataState.ERROR,\n        error\n      });\n    }));\n  }\n  goToPage(pageNumber) {\n    this.invoicesState$ = this.customerService.invoices$(pageNumber).pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      this.currentPageSubject.next(pageNumber);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADED,\n      appData: this.dataSubject.value\n    }), catchError(error => {\n      return of({\n        dataState: DataState.LOADED,\n        error,\n        appData: this.dataSubject.value\n      });\n    }));\n  }\n  goToNextOrPreviousPage(direction) {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1);\n  }\n}\nInvoicesComponent.ɵfac = function InvoicesComponent_Factory(t) {\n  return new (t || InvoicesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CustomerService));\n};\nInvoicesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InvoicesComponent,\n  selectors: [[\"app-invoices\"]],\n  decls: 2,\n  vars: 0,\n  template: function InvoicesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"invoices works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAEA,SAAqBA,eAAe,EAAEC,GAAG,EAAEC,SAAS,EAAEC,UAAU,EAAEC,EAAE,QAAQ,MAAM;AAClF,SAASC,SAAS,QAAQ,6BAA6B;;;;AAYvD,OAAM,MAAOC,iBAAiB;EAW5BC,YAAoBC,MAAc,EAAUC,eAAgC;IAAxD,WAAM,GAAND,MAAM;IAAkB,oBAAe,GAAfC,eAAe;IATnD,gBAAW,GAAG,IAAIT,eAAe,CAA2C,IAAI,CAAC;IACjF,qBAAgB,GAAG,IAAIA,eAAe,CAAU,KAAK,CAAC;IAC9D,eAAU,GAAG,IAAI,CAACU,gBAAgB,CAACC,YAAY,EAAE;IACzC,uBAAkB,GAAG,IAAIX,eAAe,CAAS,CAAC,CAAC;IAC3D,iBAAY,GAAG,IAAI,CAACY,kBAAkB,CAACD,YAAY,EAAE;IAC7C,oBAAe,GAAG,IAAIX,eAAe,CAAU,KAAK,CAAC;IAC7D,cAAS,GAAG,IAAI,CAACa,eAAe,CAACF,YAAY,EAAE;IACtC,cAAS,GAAGN,SAAS;EAEkD;EAEhFS,QAAQ;IACN,IAAI,CAACC,cAAc,GAAG,IAAI,CAACN,eAAe,CAACO,SAAS,EAAE,CACnDC,IAAI,CACHhB,GAAG,CAACiB,QAAQ,IAAG;MACbC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrB,IAAI,CAACG,WAAW,CAACC,IAAI,CAACJ,QAAQ,CAAC;MAC/B,OAAO;QAAEK,SAAS,EAAElB,SAAS,CAACmB,MAAM;QAAEC,OAAO,EAAEP;MAAQ,CAAE;IAC3D,CAAC,CAAC,EACFhB,SAAS,CAAC;MAAEqB,SAAS,EAAElB,SAAS,CAACqB;IAAO,CAAE,CAAC,EAC3CvB,UAAU,CAAEwB,KAAa,IAAI;MAC3B,OAAOvB,EAAE,CAAC;QAAEmB,SAAS,EAAElB,SAAS,CAACuB,KAAK;QAAED;MAAK,CAAE,CAAC;IAClD,CAAC,CAAC,CACH;EACL;EAEAE,QAAQ,CAACC,UAAmB;IAC1B,IAAI,CAACf,cAAc,GAAG,IAAI,CAACN,eAAe,CAACO,SAAS,CAACc,UAAU,CAAC,CAC7Db,IAAI,CACHhB,GAAG,CAACiB,QAAQ,IAAG;MACbC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrB,IAAI,CAACG,WAAW,CAACC,IAAI,CAACJ,QAAQ,CAAC;MAC/B,IAAI,CAACN,kBAAkB,CAACU,IAAI,CAACQ,UAAU,CAAC;MACxC,OAAO;QAAEP,SAAS,EAAElB,SAAS,CAACmB,MAAM;QAAEC,OAAO,EAAEP;MAAQ,CAAE;IAC3D,CAAC,CAAC,EACFhB,SAAS,CAAC;MAAEqB,SAAS,EAAElB,SAAS,CAACmB,MAAM;MAAEC,OAAO,EAAE,IAAI,CAACJ,WAAW,CAACU;IAAK,CAAE,CAAC,EAC3E5B,UAAU,CAAEwB,KAAa,IAAI;MAC3B,OAAOvB,EAAE,CAAC;QAAEmB,SAAS,EAAElB,SAAS,CAACmB,MAAM;QAAEG,KAAK;QAAEF,OAAO,EAAE,IAAI,CAACJ,WAAW,CAACU;MAAK,CAAE,CAAC;IACpF,CAAC,CAAC,CACH;EACL;EAEAC,sBAAsB,CAACC,SAAkB;IACvC,IAAI,CAACJ,QAAQ,CAACI,SAAS,KAAK,SAAS,GAAG,IAAI,CAACrB,kBAAkB,CAACmB,KAAK,GAAG,CAAC,GAAG,IAAI,CAACnB,kBAAkB,CAACmB,KAAK,GAAG,CAAC,CAAC;EAChH;;;mBA9CWzB,iBAAiB;AAAA;;QAAjBA,iBAAiB;EAAA4B;EAAAC;EAAAC;EAAAC;IAAA;MCf9BC,yBAAG;MAAAA,+BAAe;MAAAA,iBAAI","names":["BehaviorSubject","map","startWith","catchError","of","DataState","InvoicesComponent","constructor","router","customerService","isLoadingSubject","asObservable","currentPageSubject","showLogsSubject","ngOnInit","invoicesState$","invoices$","pipe","response","console","log","dataSubject","next","dataState","LOADED","appData","LOADING","error","ERROR","goToPage","pageNumber","value","goToNextOrPreviousPage","direction","selectors","decls","vars","template","i0"],"sourceRoot":"","sources":["/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/invoices/invoices.component.ts","/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/invoices/invoices.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport { CustomHttpResponse, Page } from 'src/app/interface/appstates';\nimport { Invoice } from 'src/app/interface/invoice';\nimport { State } from 'src/app/interface/state';\nimport { User } from 'src/app/interface/user';\nimport { CustomerService } from 'src/app/service/customer.service';\n\n@Component({\n  selector: 'app-invoices',\n  templateUrl: './invoices.component.html',\n  styleUrls: ['./invoices.component.css']\n})\nexport class InvoicesComponent  implements OnInit {\n  invoicesState$: Observable<State<CustomHttpResponse<Page<Invoice> & User>>>;\n  private dataSubject = new BehaviorSubject<CustomHttpResponse<Page<Invoice> & User>>(null);\n  private isLoadingSubject = new BehaviorSubject<boolean>(false);\n  isLoading$ = this.isLoadingSubject.asObservable();\n  private currentPageSubject = new BehaviorSubject<number>(0);\n  currentPage$ = this.currentPageSubject.asObservable();\n  private showLogsSubject = new BehaviorSubject<boolean>(false);\n  showLogs$ = this.showLogsSubject.asObservable();\n  readonly DataState = DataState;\n\n  constructor(private router: Router, private customerService: CustomerService) { }\n\n  ngOnInit(): void {\n    this.invoicesState$ = this.customerService.invoices$()\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADING }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.ERROR, error })\n        })\n      )\n  }\n\n  goToPage(pageNumber?: number): void {\n    this.invoicesState$ = this.customerService.invoices$(pageNumber)\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          this.currentPageSubject.next(pageNumber);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADED, appData: this.dataSubject.value }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.LOADED, error, appData: this.dataSubject.value })\n        })\n      )\n  }\n\n  goToNextOrPreviousPage(direction?: string): void {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1);\n  }\n\n}\n","<p>invoices works!</p>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/customer.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../navbar/navbar.component\";\nconst _c0 = function (a0, a1, a2, a3) {\n  return [a0, a1, a2, a3];\n};\nconst _c1 = function (a1) {\n  return [\"/customers\", a1];\n};\nfunction CustomersComponent_ng_container_0_ng_container_4_table_29_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 31)(1, \"th\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"img\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"span\", 34);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\")(17, \"button\", 35);\n    i0.ɵɵtext(18, \"View\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const customer_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", customer_r12.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", customer_r12.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r12.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r12.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r12.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction4(10, _c0, customer_r12.status === \"ACTIVE\" ? \" bg-success\" : \"\", customer_r12.status === \"PENDING\" ? \" bg-primary\" : \"\", customer_r12.status === \"BANNED\" ? \" bg-danger\" : \"\", customer_r12.status === \"INACTIVE\" ? \" bg-info\" : \"\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", customer_r12.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r12.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c1, customer_r12.id));\n  }\n}\nfunction CustomersComponent_ng_container_0_ng_container_4_table_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 26)(1, \"thead\")(2, \"tr\")(3, \"th\", 27);\n    i0.ɵɵtext(4, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 28);\n    i0.ɵɵtext(6, \"Photo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 28);\n    i0.ɵɵtext(8, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 28);\n    i0.ɵɵtext(10, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 28);\n    i0.ɵɵtext(12, \"Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\", 28);\n    i0.ɵɵtext(14, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\", 28);\n    i0.ɵɵtext(16, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\", 28);\n    i0.ɵɵtext(18, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\", 29);\n    i0.ɵɵtemplate(20, CustomersComponent_ng_container_0_ng_container_4_table_29_tr_20_Template, 19, 17, \"tr\", 30);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const state_r1 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"ngForOf\", state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page == null ? null : state_r1.appData.data.page.content);\n  }\n}\nfunction CustomersComponent_ng_container_0_ng_container_4_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"No customers found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomersComponent_ng_container_0_ng_container_4_nav_32_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 41)(1, \"a\", 42);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_0_ng_container_4_nav_32_li_6_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const i_r16 = restoredCtx.index;\n      i0.ɵɵnextContext(2);\n      const _r5 = i0.ɵɵreference(20);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.goToPage(i_r16, _r5.value.name));\n    });\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r16 = ctx.index;\n    const ctx_r14 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i_r16 == i0.ɵɵpipeBind1(2, 2, ctx_r14.currentPage$) ? \" active\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r16 + 1, \" \");\n  }\n}\nconst _c2 = function () {\n  return [];\n};\nfunction CustomersComponent_ng_container_0_ng_container_4_nav_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nav\", 36)(1, \"ul\", 37)(2, \"li\", 38);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementStart(4, \"a\", 39);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_0_ng_container_4_nav_32_Template_a_click_4_listener() {\n      i0.ɵɵrestoreView(_r20);\n      i0.ɵɵnextContext();\n      const _r5 = i0.ɵɵreference(20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.goToNextOrPreviousPage(\"backward\", _r5.value.name));\n    });\n    i0.ɵɵtext(5, \"\\u00AB Prev\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, CustomersComponent_ng_container_0_ng_container_4_nav_32_li_6_Template, 4, 4, \"li\", 40);\n    i0.ɵɵelementStart(7, \"li\", 38);\n    i0.ɵɵpipe(8, \"async\");\n    i0.ɵɵelementStart(9, \"a\", 39);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_0_ng_container_4_nav_32_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r20);\n      i0.ɵɵnextContext();\n      const _r5 = i0.ɵɵreference(20);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.goToNextOrPreviousPage(\"forward\", _r5.value.name));\n    });\n    i0.ɵɵtext(10, \"Next \\u00BB\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const state_r1 = i0.ɵɵnextContext(2).ngIf;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", 0 == i0.ɵɵpipeBind1(3, 3, ctx_r10.currentPage$) ? \" disabled\" : \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(7, _c2).constructor(state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page == null ? null : state_r1.appData.data.page.totalPages));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", (state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page == null ? null : state_r1.appData.data.page.totalPages) - 1 == i0.ɵɵpipeBind1(8, 5, ctx_r10.currentPage$) ? \" disabled\" : \"\");\n  }\n}\nconst _c3 = function () {\n  return [\"/\"];\n};\nfunction CustomersComponent_ng_container_0_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-navbar\", 3);\n    i0.ɵɵelementStart(2, \"section\")(3, \"div\", 4)(4, \"nav\", 5)(5, \"ol\", 6)(6, \"li\", 7)(7, \"a\", 8);\n    i0.ɵɵtext(8, \"Home\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"li\", 9);\n    i0.ɵɵtext(10, \" Customers \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"h4\", 12);\n    i0.ɵɵtext(14, \"Customers\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"h4\", 13);\n    i0.ɵɵelement(17, \"i\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 15)(19, \"form\", 16, 17);\n    i0.ɵɵlistener(\"ngSubmit\", function CustomersComponent_ng_container_0_ng_container_4_Template_form_ngSubmit_19_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const _r5 = i0.ɵɵreference(20);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.searchCustomers(_r5));\n    });\n    i0.ɵɵelementStart(21, \"div\", 18);\n    i0.ɵɵelement(22, \"label\", 19)(23, \"input\", 20, 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 18)(26, \"button\", 22);\n    i0.ɵɵtext(27, \"Search Customers\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(28, \"div\", 15);\n    i0.ɵɵtemplate(29, CustomersComponent_ng_container_0_ng_container_4_table_29_Template, 21, 1, \"table\", 23);\n    i0.ɵɵtemplate(30, CustomersComponent_ng_container_0_ng_container_4_ng_template_30_Template, 2, 0, \"ng-template\", null, 24, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(32, CustomersComponent_ng_container_0_ng_container_4_nav_32_Template, 11, 8, \"nav\", 25);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r8 = i0.ɵɵreference(31);\n    const state_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.user);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c3));\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"ngIf\", (state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page == null ? null : state_r1.appData.data.page.content == null ? null : state_r1.appData.data.page.content.length) > 0)(\"ngIfElse\", _r8);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (state_r1 == null ? null : state_r1.appData == null ? null : state_r1.appData.data == null ? null : state_r1.appData.data.page == null ? null : state_r1.appData.data.page.totalPages) > 1);\n  }\n}\nfunction CustomersComponent_ng_container_0_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction CustomersComponent_ng_container_0_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const state_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(state_r1.error);\n  }\n}\nfunction CustomersComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 1);\n    i0.ɵɵelementStart(1, \"pre\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"json\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CustomersComponent_ng_container_0_ng_container_4_Template, 33, 6, \"ng-container\", 2);\n    i0.ɵɵtemplate(5, CustomersComponent_ng_container_0_ng_container_5_Template, 3, 0, \"ng-container\", 2);\n    i0.ɵɵtemplate(6, CustomersComponent_ng_container_0_ng_container_6_Template, 3, 1, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const state_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngSwitch\", state_r1.dataState);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, state_r1));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r0.DataState.LOADED);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r0.DataState.LOADING);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r0.DataState.ERROR);\n  }\n}\nexport class CustomersComponent {\n  constructor(router, customerService) {\n    this.router = router;\n    this.customerService = customerService;\n    this.dataSubject = new BehaviorSubject(null);\n    this.isLoadingSubject = new BehaviorSubject(false);\n    this.isLoading$ = this.isLoadingSubject.asObservable();\n    this.currentPageSubject = new BehaviorSubject(0);\n    this.currentPage$ = this.currentPageSubject.asObservable();\n    this.showLogsSubject = new BehaviorSubject(false);\n    this.showLogs$ = this.showLogsSubject.asObservable();\n    this.DataState = DataState;\n  }\n  ngOnInit() {\n    this.customersState$ = this.customerService.searchCustomers$().pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADING\n    }), catchError(error => {\n      return of({\n        dataState: DataState.ERROR,\n        error\n      });\n    }));\n  }\n  searchCustomers(searchForm) {\n    this.currentPageSubject.next(0);\n    this.customersState$ = this.customerService.searchCustomers$(searchForm.value.name).pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADED,\n      appData: this.dataSubject.value\n    }), catchError(error => {\n      return of({\n        dataState: DataState.ERROR,\n        error\n      });\n    }));\n  }\n  goToPage(pageNumber, name) {\n    this.customersState$ = this.customerService.searchCustomers$(name, pageNumber).pipe(map(response => {\n      console.log(response);\n      this.dataSubject.next(response);\n      this.currentPageSubject.next(pageNumber);\n      return {\n        dataState: DataState.LOADED,\n        appData: response\n      };\n    }), startWith({\n      dataState: DataState.LOADED,\n      appData: this.dataSubject.value\n    }), catchError(error => {\n      return of({\n        dataState: DataState.LOADED,\n        error,\n        appData: this.dataSubject.value\n      });\n    }));\n  }\n  goToNextOrPreviousPage(direction, name) {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1, name);\n  }\n  selectCustomer(customer) {\n    this.router.navigate([`/customers/${customer.id}`]);\n  }\n}\nCustomersComponent.ɵfac = function CustomersComponent_Factory(t) {\n  return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CustomerService));\n};\nCustomersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomersComponent,\n  selectors: [[\"app-customers\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[3, \"ngSwitch\", 4, \"ngIf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [3, \"user\"], [1, \"container\"], [\"aria-label\", \"breadcrumb\", 2, \"margin-top\", \"8px\"], [1, \"breadcrumb\"], [1, \"breadcrumb-item\"], [3, \"routerLink\"], [1, \"breadcrumb-item\", \"active\"], [1, \"row\", \"mt-3\"], [1, \"col\"], [1, \"fw-bold\", \"text-start\"], [1, \"fw-bold\", \"text-end\"], [1, \"bi\", \"bi-file-earmark-excel\", 2, \"cursor\", \"pointer\", \"color\", \"green\", \"font-size\", \"30px\"], [1, \"col-xm-12\"], [1, \"row\", \"g-3\", \"float-end\", 3, \"ngSubmit\"], [\"searchForm\", \"ngForm\"], [1, \"col-auto\"], [\"for\", \"name\", 1, \"visually-hidden\"], [\"type\", \"text\", \"ngModel\", \"\", \"name\", \"name\", \"placeholder\", \"Customer Name\", 1, \"form-control\"], [\"name\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mb-3\"], [\"class\", \"table table-hover\", 4, \"ngIf\", \"ngIfElse\"], [\"noData\", \"\"], [\"aria-label\", \"Page navigation example\", 4, \"ngIf\"], [1, \"table\", \"table-hover\"], [\"scope\", \"col\", 1, \"text-center\"], [\"scope\", \"col\"], [1, \"table-body\"], [\"class\", \"cell-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"cell-1\"], [1, \"text-center\"], [\"width\", \"42\", \"height\", \"42\", 1, \"rounded-circle\", 3, \"src\", \"alt\"], [1, \"badge\", 3, \"ngClass\"], [\"type\", \"button\", 1, \"btn\", \"btn-info\", 3, \"routerLink\"], [\"aria-label\", \"Page navigation example\"], [1, \"pagination\", \"justify-content-end\"], [1, \"page-item\", \"pointer\", 3, \"ngClass\"], [1, \"page-link\", 3, \"click\"], [\"class\", \"page-item pointer\", 4, \"ngFor\", \"ngForOf\"], [1, \"page-item\", \"pointer\"], [1, \"page-link\", 3, \"ngClass\", \"click\"]],\n  template: function CustomersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CustomersComponent_ng_container_0_Template, 7, 7, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.customersState$));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgSwitch, i3.NgSwitchCase, i1.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, i5.NavbarComponent, i3.AsyncPipe, i3.JsonPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["BehaviorSubject","map","startWith","catchError","of","DataState","i0","CustomersComponent","constructor","router","customerService","isLoadingSubject","asObservable","currentPageSubject","showLogsSubject","ngOnInit","customersState$","searchCustomers$","pipe","response","console","log","dataSubject","next","dataState","LOADED","appData","LOADING","error","ERROR","searchCustomers","searchForm","value","name","goToPage","pageNumber","goToNextOrPreviousPage","direction","selectCustomer","customer","navigate","id","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/customers/customers.component.ts","/Users/marsel/bostoneo/bostoneosolutionsapp/src/app/component/customers/customers.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { EventType, Router } from '@angular/router';\nimport { Observable, BehaviorSubject, map, startWith, catchError, of } from 'rxjs';\nimport { DataState } from 'src/app/enum/datastate.enum';\nimport { CustomHttpResponse, Page, Profile } from 'src/app/interface/appstates';\nimport { Customer } from 'src/app/interface/customer';\nimport { State } from 'src/app/interface/state';\nimport { User } from 'src/app/interface/user';\nimport { CustomerService } from 'src/app/service/customer.service';\nimport { UserService } from 'src/app/service/user.service';\n\n@Component({\n  selector: 'app-customers',\n  templateUrl: './customers.component.html',\n  styleUrls: ['./customers.component.css']\n})\nexport class CustomersComponent implements OnInit {\n  customersState$: Observable<State<CustomHttpResponse<Page & User>>>;\n  private dataSubject = new BehaviorSubject<CustomHttpResponse<Page & User>>(null);\n  private isLoadingSubject = new BehaviorSubject<boolean>(false);\n  isLoading$ = this.isLoadingSubject.asObservable();\n  private currentPageSubject = new BehaviorSubject<number>(0);\n  currentPage$ = this.currentPageSubject.asObservable();\n  private showLogsSubject = new BehaviorSubject<boolean>(false);\n  showLogs$ = this.showLogsSubject.asObservable();\n  readonly DataState = DataState;\n\n  constructor(private router: Router, private customerService: CustomerService) { }\n\n  ngOnInit(): void {\n    this.customersState$ = this.customerService.searchCustomers$()\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADING }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.ERROR, error })\n        })\n      )\n  }\n\n  searchCustomers(searchForm: NgForm): void {\n    this.currentPageSubject.next(0);\n    this.customersState$ = this.customerService.searchCustomers$(searchForm.value.name)\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADED, appData: this.dataSubject.value }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.ERROR, error })\n        })\n      )\n  }\n\n  goToPage(pageNumber?: number, name?: string): void {\n    this.customersState$ = this.customerService.searchCustomers$(name, pageNumber)\n      .pipe(\n        map(response => {\n          console.log(response);\n          this.dataSubject.next(response);\n          this.currentPageSubject.next(pageNumber);\n          return { dataState: DataState.LOADED, appData: response };\n        }),\n        startWith({ dataState: DataState.LOADED, appData: this.dataSubject.value }),\n        catchError((error: string) => {\n          return of({ dataState: DataState.LOADED, error, appData: this.dataSubject.value })\n        })\n      )\n  }\n\n  goToNextOrPreviousPage(direction?: string, name?: string): void {\n    this.goToPage(direction === 'forward' ? this.currentPageSubject.value + 1 : this.currentPageSubject.value - 1, name);\n  }\n\n  selectCustomer(customer: Customer): void {\n    this.router.navigate([`/customers/${customer.id}`]);\n  }\n\n}\n","<ng-container *ngIf=\"(customersState$ | async) as state\" [ngSwitch]=\"state.dataState\">\n    <pre>{{ state | json }}</pre>\n    <ng-container *ngSwitchCase=\"DataState.LOADED\">\n       <app-navbar [user]=\"state?.appData?.data?.user\"></app-navbar>\n       <section>\n          <div class=\"container\">\n             <nav aria-label=\"breadcrumb\" style=\"margin-top: 8px;\">\n                <ol class=\"breadcrumb\">\n                   <li class=\"breadcrumb-item\">\n                      <a [routerLink]=\"['/']\">Home</a>\n                   </li>\n                   <li class=\"breadcrumb-item active\"> Customers </li>\n                </ol>\n             </nav>\n             <div class=\"row mt-3\">\n                <div class=\"col\">\n                   <h4 class=\"fw-bold text-start\">Customers</h4>\n                </div>\n                <div class=\"col\">\n                   <h4 class=\"fw-bold text-end\"><i style=\"cursor: pointer;color: green;font-size: 30px;\" class=\"bi bi-file-earmark-excel\"></i></h4>\n                </div>\n                <div class=\"col-xm-12\">\n                   <form #searchForm=\"ngForm\" (ngSubmit)=\"searchCustomers(searchForm)\" class=\"row g-3 float-end\">\n                      <div class=\"col-auto\">\n                        <label for=\"name\" class=\"visually-hidden\"></label>\n                        <input type=\"text\" ngModel name=\"name\" #name class=\"form-control\" placeholder=\"Customer Name\">\n                      </div>\n                      <div class=\"col-auto\">\n                        <button type=\"submit\" class=\"btn btn-primary mb-3\">Search Customers</button>\n                      </div>\n                    </form>\n                </div>\n                <div class=\"col-xm-12\">\n                    <table class=\"table table-hover\" *ngIf=\"state?.appData?.data?.page?.content?.length > 0; else noData\">\n                        <thead>\n                            <tr>\n                              <th class=\"text-center\" scope=\"col\">ID</th>\n                              <th scope=\"col\">Photo</th>\n                              <th scope=\"col\">Name</th>\n                              <th scope=\"col\">Email</th>\n                              <th scope=\"col\">Phone</th>\n                              <th scope=\"col\">Status</th>\n                              <th scope=\"col\">Type</th>\n                              <th scope=\"col\">Action</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"table-body\">\n                            <tr *ngFor=\"let customer of state?.appData?.data?.page?.content\" class=\"cell-1\">\n                              <th class=\"text-center\">{{ customer.id }}</th>\n                              <td><img [src]=\"customer.imageUrl\" width=\"42\" height=\"42\" class=\"rounded-circle\" [alt]=\"customer.name\"></td>\n                              <td>{{ customer.name }}</td>\n                              <td>{{ customer.email }}</td>                          \n                              <td>{{ customer.phone }}</td>\n                              <td>\n                                 <span class=\"badge\"\n                                   [ngClass]=\"[\n                                      customer.status === 'ACTIVE' ? ' bg-success' : '',\n                                      customer.status === 'PENDING' ? ' bg-primary' : '',\n                                      customer.status === 'BANNED' ? ' bg-danger' : '',\n                                      customer.status === 'INACTIVE' ? ' bg-info' : '',]\" \n                                 >\n                                    {{ customer.status }}\n                                 </span>\n                              </td>\n                              <td>{{ customer.type }}</td>\n                              <td>\n                                 <button type=\"button\" [routerLink]=\"['/customers', customer.id]\" class=\"btn btn-info\">View</button>\n                              </td>\n                           </tr>\n                        </tbody>\n                    </table>\n                    \n                    <ng-template #noData>\n                        <div>No customers found.</div>\n                    </ng-template>\n\n                    <nav *ngIf=\"state?.appData?.data?.page?.totalPages > 1\" aria-label=\"Page navigation example\">\n                        <ul class=\"pagination justify-content-end\">\n                           <li [ngClass]=\"0 == (currentPage$ | async) ? ' disabled' : ''\" class=\"page-item pointer\">\n                              <a (click)=\"goToNextOrPreviousPage('backward', searchForm.value.name)\" class=\"page-link\">&laquo; Prev</a>\n                           </li>\n                           <li *ngFor=\"let pageNumber of [].constructor(state?.appData?.data?.page?.totalPages); let i = index;\" class=\"page-item pointer\">\n                              <a (click)=\"goToPage(i, searchForm.value.name)\" [ngClass]=\"i == (currentPage$ | async) ? ' active' : ''\" class=\"page-link\">\n                                {{ i + 1 }}\n                              </a>\n                           </li>\n                           <li [ngClass]=\"(state?.appData?.data?.page?.totalPages - 1) == (currentPage$ | async) ? ' disabled' : ''\" class=\"page-item pointer\">\n                              <a (click)=\"goToNextOrPreviousPage('forward', searchForm.value.name)\" class=\"page-link\">Next &raquo;</a>\n                           </li>\n                        </ul>\n                     </nav>\n                </div>\n             </div>\n          </div>\n       </section>\n    </ng-container>\n\n    <ng-container *ngSwitchCase=\"DataState.LOADING\">\n        <div>Loading...</div>\n     </ng-container>\n\n     <ng-container *ngSwitchCase=\"DataState.ERROR\">\n        <div>{{ state.error }}</div>\n     </ng-container>\n</ng-container>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}